<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Building a Single-Threaded Web Server - Knowledge Management Base</title>
        

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="A description">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:500" rel="stylesheet" type="text/css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body class="light">
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            document.body.className = theme;
            document.querySelector('html').className = theme + ' js';
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li><a href="../mytopic/index.html"><strong aria-hidden="true">1.</strong> My Topic</a></li><li><ol class="section"><li><a href="../mytopic/rust_trait_topic.html"><strong aria-hidden="true">1.1.</strong> Rust trait topic</a></li><li><a href="../mytopic/rust_copy_clone.html"><strong aria-hidden="true">1.2.</strong> Rust difference between copy and clone</a></li><li><a href="../mytopic/ownership_borrow_move_reference.html"><strong aria-hidden="true">1.3.</strong> Rust ownership borrow and move reference</a></li><li><a href="../mytopic/str_string.html"><strong aria-hidden="true">1.4.</strong> Rust &amp;str and String</a></li><li><a href="../mytopic/closure.html"><strong aria-hidden="true">1.5.</strong> Rust closure</a></li><li><a href="../mytopic/kualian.html"><strong aria-hidden="true">1.6.</strong> 跨链专题</a></li><li><a href="../mytopic/web3.html"><strong aria-hidden="true">1.7.</strong> web3专题</a></li><li><a href="../mytopic/eth2.html"><strong aria-hidden="true">1.8.</strong> eth2.0 专题</a></li></ol></li><li><a href="../algorithm/index.html"><strong aria-hidden="true">2.</strong> Algorithm</a></li><li><ol class="section"><li><a href="../algorithm/geektimealgorithm/index.html"><strong aria-hidden="true">2.1.</strong> 极客时间 数据结构与算法之美 geeitime algorithm</a></li><li><a href="../algorithm/algorithmbook/index.html"><strong aria-hidden="true">2.2.</strong> Algorithm Book</a></li><li><a href="../algorithm/geektimemath/index.html"><strong aria-hidden="true">2.3.</strong> 极客时间 程序员的数学基础课 geektime math</a></li></ol></li><li><a href="../frontend/index.html"><strong aria-hidden="true">3.</strong> Frontend</a></li><li><a href="../tao/index.html"><strong aria-hidden="true">4.</strong> 编程之道 Tao of Rust</a></li><li><ol class="section"><li><a href="../tao/typesystem/index.html"><strong aria-hidden="true">4.1.</strong> 类型系统</a></li><li><a href="../tao/memory/index.html"><strong aria-hidden="true">4.2.</strong> 内存管理</a></li><li><a href="../tao/ownership/index.html"><strong aria-hidden="true">4.3.</strong> 所有权系统</a></li><li><a href="../tao/functionclosure/index.html"><strong aria-hidden="true">4.4.</strong> 函数 闭包与迭代器</a></li><li><a href="../tao/jiegouhua/index.html"><strong aria-hidden="true">4.5.</strong> 结构化编程</a></li><li><a href="../tao/stringcollection/index.html"><strong aria-hidden="true">4.6.</strong> 字符串与集合类型</a></li><li><a href="../tao/jianzhuang/index.html"><strong aria-hidden="true">4.7.</strong> 构建健壮的程序</a></li><li><a href="../tao/module/index.html"><strong aria-hidden="true">4.8.</strong> 模块化编程</a></li><li><a href="../tao/bingfa/index.html"><strong aria-hidden="true">4.9.</strong> 安全并发</a></li><li><a href="../tao/macro/index.html"><strong aria-hidden="true">4.10.</strong> 元编程</a></li><li><a href="../tao/unsafe/index.html"><strong aria-hidden="true">4.11.</strong> 超越安全的边界</a></li></ol></li><li><a href="../rustexample/index.html"><strong aria-hidden="true">5.</strong> Rust by Example</a></li><li><ol class="section"><li><a href="../rustexample/hello.html"><strong aria-hidden="true">5.1.</strong> Hello World</a></li><li><ol class="section"><li><a href="../rustexample/hello/comment.html"><strong aria-hidden="true">5.1.1.</strong> Comments</a></li><li><a href="../rustexample/hello/print.html"><strong aria-hidden="true">5.1.2.</strong> Formatted print</a></li><li><ol class="section"><li><a href="../rustexample/hello/print/print_debug.html"><strong aria-hidden="true">5.1.2.1.</strong> Debug</a></li><li><a href="../rustexample/hello/print/print_display.html"><strong aria-hidden="true">5.1.2.2.</strong> Display</a></li><li><ol class="section"><li><a href="../rustexample/hello/print/print_display/testcase_list.html"><strong aria-hidden="true">5.1.2.2.1.</strong> Testcase: List</a></li></ol></li><li><a href="../rustexample/hello/print/fmt.html"><strong aria-hidden="true">5.1.2.3.</strong> Formatting</a></li></ol></li></ol></li><li><a href="../rustexample/primitives.html"><strong aria-hidden="true">5.2.</strong> Primitives</a></li><li><ol class="section"><li><a href="../rustexample/primitives/literals.html"><strong aria-hidden="true">5.2.1.</strong> Literals and operators</a></li><li><a href="../rustexample/primitives/tuples.html"><strong aria-hidden="true">5.2.2.</strong> Tuples</a></li><li><a href="../rustexample/primitives/array.html"><strong aria-hidden="true">5.2.3.</strong> Arrays and Slices</a></li></ol></li><li><a href="../rustexample/custom_types.html"><strong aria-hidden="true">5.3.</strong> Custom Types</a></li><li><ol class="section"><li><a href="../rustexample/custom_types/structs.html"><strong aria-hidden="true">5.3.1.</strong> Structures</a></li><li><a href="../rustexample/custom_types/enum.html"><strong aria-hidden="true">5.3.2.</strong> Enums</a></li><li><ol class="section"><li><a href="../rustexample/custom_types/enum/enum_use.html"><strong aria-hidden="true">5.3.2.1.</strong> use</a></li><li><a href="../rustexample/custom_types/enum/c_like.html"><strong aria-hidden="true">5.3.2.2.</strong> C-like</a></li><li><a href="../rustexample/custom_types/enum/testcase_linked_list.html"><strong aria-hidden="true">5.3.2.3.</strong> Testcase: linked-list</a></li></ol></li><li><a href="../rustexample/custom_types/constants.html"><strong aria-hidden="true">5.3.3.</strong> constants</a></li></ol></li><li><a href="../rustexample/variable_bindings.html"><strong aria-hidden="true">5.4.</strong> Variable Bindings</a></li><li><ol class="section"><li><a href="../rustexample/variable_bindings/mut.html"><strong aria-hidden="true">5.4.1.</strong> Mutability</a></li><li><a href="../rustexample/variable_bindings/scope.html"><strong aria-hidden="true">5.4.2.</strong> Scope and Shadowing</a></li><li><a href="../rustexample/variable_bindings/declare.html"><strong aria-hidden="true">5.4.3.</strong> Declare first</a></li></ol></li><li><a href="../rustexample/types.html"><strong aria-hidden="true">5.5.</strong> Types</a></li><li><ol class="section"><li><a href="../rustexample/types/cast.html"><strong aria-hidden="true">5.5.1.</strong> Casting</a></li><li><a href="../rustexample/types/literals.html"><strong aria-hidden="true">5.5.2.</strong> Literals</a></li><li><a href="../rustexample/types/inference.html"><strong aria-hidden="true">5.5.3.</strong> Inference</a></li><li><a href="../rustexample/types/alias.html"><strong aria-hidden="true">5.5.4.</strong> Aliasing</a></li></ol></li><li><a href="../rustexample/conversion.html"><strong aria-hidden="true">5.6.</strong> Conversion</a></li><li><ol class="section"><li><a href="../rustexample/conversion/from_into.html"><strong aria-hidden="true">5.6.1.</strong> From and Into</a></li><li><a href="../rustexample/conversion/string.html"><strong aria-hidden="true">5.6.2.</strong> To and from Strings</a></li></ol></li><li><a href="../rustexample/expression.html"><strong aria-hidden="true">5.7.</strong> Expressions</a></li><li><a href="../rustexample/flow_control.html"><strong aria-hidden="true">5.8.</strong> Flow of Control</a></li><li><ol class="section"><li><a href="../rustexample/flow_control/if_else.html"><strong aria-hidden="true">5.8.1.</strong> if/else</a></li><li><a href="../rustexample/flow_control/loop.html"><strong aria-hidden="true">5.8.2.</strong> loop</a></li><li><ol class="section"><li><a href="../rustexample/flow_control/loop/nested.html"><strong aria-hidden="true">5.8.2.1.</strong> Nesting and labels</a></li><li><a href="../rustexample/flow_control/loop/return.html"><strong aria-hidden="true">5.8.2.2.</strong> Returning from loops</a></li></ol></li><li><a href="../rustexample/flow_control/while.html"><strong aria-hidden="true">5.8.3.</strong> while</a></li><li><a href="../rustexample/flow_control/for.html"><strong aria-hidden="true">5.8.4.</strong> for and range</a></li><li><a href="../rustexample/flow_control/match.html"><strong aria-hidden="true">5.8.5.</strong> match</a></li><li><ol class="section"><li><a href="../rustexample/flow_control/match/destructuring.html"><strong aria-hidden="true">5.8.5.1.</strong> Destructuring</a></li><li><ol class="section"><li><a href="../rustexample/flow_control/match/destructuring/destructure_tuple.html"><strong aria-hidden="true">5.8.5.1.1.</strong> tuples</a></li><li><a href="../rustexample/flow_control/match/destructuring/destructure_enum.html"><strong aria-hidden="true">5.8.5.1.2.</strong> enums</a></li><li><a href="../rustexample/flow_control/match/destructuring/destructure_pointers.html"><strong aria-hidden="true">5.8.5.1.3.</strong> pointers/ref</a></li><li><a href="../rustexample/flow_control/match/destructuring/destructure_structures.html"><strong aria-hidden="true">5.8.5.1.4.</strong> structs</a></li></ol></li><li><a href="../rustexample/flow_control/match/guard.html"><strong aria-hidden="true">5.8.5.2.</strong> Guards</a></li><li><a href="../rustexample/flow_control/match/binding.html"><strong aria-hidden="true">5.8.5.3.</strong> Binding</a></li></ol></li><li><a href="../rustexample/flow_control/if_let.html"><strong aria-hidden="true">5.8.6.</strong> if let</a></li><li><a href="../rustexample/flow_control/while_let.html"><strong aria-hidden="true">5.8.7.</strong> while let</a></li></ol></li><li><a href="../rustexample/fn.html"><strong aria-hidden="true">5.9.</strong> Functions</a></li><li><ol class="section"><li><a href="../rustexample/fn/methods.html"><strong aria-hidden="true">5.9.1.</strong> Methods</a></li><li><a href="../rustexample/fn/closures.html"><strong aria-hidden="true">5.9.2.</strong> Closures</a></li><li><ol class="section"><li><a href="../rustexample/fn/closures/capture.html"><strong aria-hidden="true">5.9.2.1.</strong> Capturing</a></li><li><a href="../rustexample/fn/closures/input_parameters.html"><strong aria-hidden="true">5.9.2.2.</strong> As input parameters</a></li><li><a href="../rustexample/fn/closures/anonymity.html"><strong aria-hidden="true">5.9.2.3.</strong> Type anonymity</a></li><li><a href="../rustexample/fn/closures/input_functions.html"><strong aria-hidden="true">5.9.2.4.</strong> Input functions</a></li><li><a href="../rustexample/fn/closures/output_parameters.html"><strong aria-hidden="true">5.9.2.5.</strong> As output parameters</a></li><li><a href="../rustexample/fn/closures/closure_examples.html"><strong aria-hidden="true">5.9.2.6.</strong> Examples in std</a></li><li><ol class="section"><li><a href="../rustexample/fn/closures/closure_examples/iter_any.html"><strong aria-hidden="true">5.9.2.6.1.</strong> Iterator::any</a></li><li><a href="../rustexample/fn/closures/closure_examples/iter_find.html"><strong aria-hidden="true">5.9.2.6.2.</strong> Iterator::find</a></li></ol></li></ol></li><li><a href="../rustexample/fn/hof.html"><strong aria-hidden="true">5.9.3.</strong> Higher Order Functions</a></li><li><a href="../rustexample/fn/diverging.html"><strong aria-hidden="true">5.9.4.</strong> Diverging functions</a></li></ol></li><li><a href="../rustexample/mod.html"><strong aria-hidden="true">5.10.</strong> Modules</a></li><li><ol class="section"><li><a href="../rustexample/mod/visibility.html"><strong aria-hidden="true">5.10.1.</strong> Visibility</a></li><li><a href="../rustexample/mod/struct_visibility.html"><strong aria-hidden="true">5.10.2.</strong> Struct visibility</a></li><li><a href="../rustexample/mod/use.html"><strong aria-hidden="true">5.10.3.</strong> The use declaration</a></li><li><a href="../rustexample/mod/super.html"><strong aria-hidden="true">5.10.4.</strong> super and self</a></li><li><a href="../rustexample/mod/split.html"><strong aria-hidden="true">5.10.5.</strong> File hierarchy</a></li></ol></li><li><a href="../rustexample/crates.html"><strong aria-hidden="true">5.11.</strong> Crates</a></li><li><ol class="section"><li><a href="../rustexample/crates/lib.html"><strong aria-hidden="true">5.11.1.</strong> Library</a></li><li><a href="../rustexample/crates/link.html"><strong aria-hidden="true">5.11.2.</strong> extern crate</a></li></ol></li><li><a href="../rustexample/cargo.html"><strong aria-hidden="true">5.12.</strong> Cargo</a></li><li><ol class="section"><li><a href="../rustexample/cargo/deps.html"><strong aria-hidden="true">5.12.1.</strong> Dependencies</a></li><li><a href="../rustexample/cargo/conventions.html"><strong aria-hidden="true">5.12.2.</strong> Conventions</a></li><li><a href="../rustexample/cargo/test.html"><strong aria-hidden="true">5.12.3.</strong> Tests</a></li><li><a href="../rustexample/cargo/build_scripts.html"><strong aria-hidden="true">5.12.4.</strong> Build Scripts</a></li></ol></li><li><a href="../rustexample/attribute.html"><strong aria-hidden="true">5.13.</strong> Attributes</a></li><li><ol class="section"><li><a href="../rustexample/attribute/unused.html"><strong aria-hidden="true">5.13.1.</strong> dead_code</a></li><li><a href="../rustexample/attribute/crate.html"><strong aria-hidden="true">5.13.2.</strong> Crates</a></li><li><a href="../rustexample/attribute/cfg.html"><strong aria-hidden="true">5.13.3.</strong> cfg</a></li><li><ol class="section"><li><a href="../rustexample/attribute/cfg/custom.html"><strong aria-hidden="true">5.13.3.1.</strong> Custom</a></li></ol></li></ol></li><li><a href="../rustexample/generics.html"><strong aria-hidden="true">5.14.</strong> Generics</a></li><li><ol class="section"><li><a href="../rustexample/generics/gen_fn.html"><strong aria-hidden="true">5.14.1.</strong> Functions</a></li><li><a href="../rustexample/generics/impl.html"><strong aria-hidden="true">5.14.2.</strong> Implementation</a></li><li><a href="../rustexample/generics/gen_trait.html"><strong aria-hidden="true">5.14.3.</strong> Traits</a></li><li><a href="../rustexample/generics/bounds.html"><strong aria-hidden="true">5.14.4.</strong> Bounds</a></li><li><ol class="section"><li><a href="../rustexample/generics/bounds/testcase_empty.html"><strong aria-hidden="true">5.14.4.1.</strong> Testcase: empty bounds</a></li></ol></li><li><a href="../rustexample/generics/multi_bounds.html"><strong aria-hidden="true">5.14.5.</strong> Multiple bounds</a></li><li><a href="../rustexample/generics/where.html"><strong aria-hidden="true">5.14.6.</strong> Where clauses</a></li><li><a href="../rustexample/generics/new_types.html"><strong aria-hidden="true">5.14.7.</strong> New Type Idiom</a></li><li><a href="../rustexample/generics/assoc_items.html"><strong aria-hidden="true">5.14.8.</strong> Associated items</a></li><li><ol class="section"><li><a href="../rustexample/generics/assoc_items/the_problem.html"><strong aria-hidden="true">5.14.8.1.</strong> The Problem</a></li><li><a href="../rustexample/generics/assoc_items/types.html"><strong aria-hidden="true">5.14.8.2.</strong> Associated types</a></li></ol></li><li><a href="../rustexample/generics/phantom.html"><strong aria-hidden="true">5.14.9.</strong> Phantom type parameters</a></li><li><ol class="section"><li><a href="../rustexample/generics/phantom/testcase_units.html"><strong aria-hidden="true">5.14.9.1.</strong> Testcase: unit clarification</a></li></ol></li></ol></li><li><a href="../rustexample/scope.html"><strong aria-hidden="true">5.15.</strong> Scoping rules</a></li><li><ol class="section"><li><a href="../rustexample/scope/raii.html"><strong aria-hidden="true">5.15.1.</strong> RAII</a></li><li><a href="../rustexample/scope/move.html"><strong aria-hidden="true">5.15.2.</strong> Ownership and moves</a></li><li><ol class="section"><li><a href="../rustexample/scope/move/mut.html"><strong aria-hidden="true">5.15.2.1.</strong> Mutability</a></li></ol></li><li><a href="../rustexample/scope/borrow.html"><strong aria-hidden="true">5.15.3.</strong> Borrowing</a></li><li><ol class="section"><li><a href="../rustexample/scope/borrow/mut.html"><strong aria-hidden="true">5.15.3.1.</strong> Mutability</a></li><li><a href="../rustexample/scope/borrow/freeze.html"><strong aria-hidden="true">5.15.3.2.</strong> Freezing</a></li><li><a href="../rustexample/scope/borrow/alias.html"><strong aria-hidden="true">5.15.3.3.</strong> Aliasing</a></li><li><a href="../rustexample/scope/borrow/ref.html"><strong aria-hidden="true">5.15.3.4.</strong> The ref pattern</a></li></ol></li><li><a href="../rustexample/scope/lifetime.html"><strong aria-hidden="true">5.15.4.</strong> Lifetimes</a></li><li><ol class="section"><li><a href="../rustexample/scope/lifetime/explicit.html"><strong aria-hidden="true">5.15.4.1.</strong> Explicit annotation</a></li><li><a href="../rustexample/scope/lifetime/fn.html"><strong aria-hidden="true">5.15.4.2.</strong> Functions</a></li><li><a href="../rustexample/scope/lifetime/methods.html"><strong aria-hidden="true">5.15.4.3.</strong> Methods</a></li><li><a href="../rustexample/scope/lifetime/struct.html"><strong aria-hidden="true">5.15.4.4.</strong> Structs</a></li><li><a href="../rustexample/scope/lifetime/trait.html"><strong aria-hidden="true">5.15.4.5.</strong> Traits</a></li><li><a href="../rustexample/scope/lifetime/lifetime_bounds.html"><strong aria-hidden="true">5.15.4.6.</strong> Bounds</a></li><li><a href="../rustexample/scope/lifetime/lifetime_coercion.html"><strong aria-hidden="true">5.15.4.7.</strong> Coercion</a></li><li><a href="../rustexample/scope/lifetime/static_lifetime.html"><strong aria-hidden="true">5.15.4.8.</strong> Static</a></li><li><a href="../rustexample/scope/lifetime/elision.html"><strong aria-hidden="true">5.15.4.9.</strong> Elision</a></li></ol></li></ol></li><li><a href="../rustexample/trait.html"><strong aria-hidden="true">5.16.</strong> Traits</a></li><li><ol class="section"><li><a href="../rustexample/trait/derive.html"><strong aria-hidden="true">5.16.1.</strong> Derive</a></li><li><a href="../rustexample/trait/ops.html"><strong aria-hidden="true">5.16.2.</strong> Operator Overloading</a></li><li><a href="../rustexample/trait/drop.html"><strong aria-hidden="true">5.16.3.</strong> Drop</a></li><li><a href="../rustexample/trait/iter.html"><strong aria-hidden="true">5.16.4.</strong> Iterators</a></li><li><a href="../rustexample/trait/clone.html"><strong aria-hidden="true">5.16.5.</strong> Clone</a></li></ol></li><li><a href="../rustexample/macros.html"><strong aria-hidden="true">5.17.</strong> macro_rules!</a></li><li><ol class="section"><li><a href="../rustexample/macros/syntax.html"><strong aria-hidden="true">5.17.1.</strong> Syntax</a></li><li><ol class="section"><li><a href="../rustexample/macros/designators.html"><strong aria-hidden="true">5.17.1.1.</strong> Designators</a></li><li><a href="../rustexample/macros/overload.html"><strong aria-hidden="true">5.17.1.2.</strong> Overload</a></li><li><a href="../rustexample/macros/repeat.html"><strong aria-hidden="true">5.17.1.3.</strong> Repeat</a></li></ol></li><li><a href="../rustexample/macros/dry.html"><strong aria-hidden="true">5.17.2.</strong> DRY (Don't Repeat Yourself)</a></li><li><a href="../rustexample/macros/dsl.html"><strong aria-hidden="true">5.17.3.</strong> DSL (Domain Specific Languages)</a></li><li><a href="../rustexample/macros/variadics.html"><strong aria-hidden="true">5.17.4.</strong> Variadics</a></li></ol></li><li><a href="../rustexample/error.html"><strong aria-hidden="true">5.18.</strong> Error handling</a></li><li><ol class="section"><li><a href="../rustexample/error/panic.html"><strong aria-hidden="true">5.18.1.</strong> panic</a></li><li><a href="../rustexample/error/option_unwrap.html"><strong aria-hidden="true">5.18.2.</strong> Option &amp; unwrap</a></li><li><ol class="section"><li><a href="../rustexample/error/option_unwrap/map.html"><strong aria-hidden="true">5.18.2.1.</strong> Combinators: map</a></li><li><a href="../rustexample/error/option_unwrap/and_then.html"><strong aria-hidden="true">5.18.2.2.</strong> Combinators: and_then</a></li></ol></li><li><a href="../rustexample/error/result.html"><strong aria-hidden="true">5.18.3.</strong> Result</a></li><li><ol class="section"><li><a href="../rustexample/error/result/result_map.html"><strong aria-hidden="true">5.18.3.1.</strong> map for Result</a></li><li><a href="../rustexample/error/result/result_alias.html"><strong aria-hidden="true">5.18.3.2.</strong> aliases for Result</a></li><li><a href="../rustexample/error/result/early_returns.html"><strong aria-hidden="true">5.18.3.3.</strong> Early returns</a></li><li><a href="../rustexample/error/result/enter_question_mark.html"><strong aria-hidden="true">5.18.3.4.</strong> Introducing ?</a></li></ol></li><li><a href="../rustexample/error/multiple_error_types.html"><strong aria-hidden="true">5.18.4.</strong> Multiple error types</a></li><li><ol class="section"><li><a href="../rustexample/error/multiple_error_types/option_result.html"><strong aria-hidden="true">5.18.4.1.</strong> Pulling Results out of Options</a></li><li><a href="../rustexample/error/multiple_error_types/define_error_type.html"><strong aria-hidden="true">5.18.4.2.</strong> Defining an error type</a></li><li><a href="../rustexample/error/multiple_error_types/boxing_errors.html"><strong aria-hidden="true">5.18.4.3.</strong> Boxing errors</a></li><li><a href="../rustexample/error/multiple_error_types/reenter_question_mark.html"><strong aria-hidden="true">5.18.4.4.</strong> Other uses of ?</a></li><li><a href="../rustexample/error/multiple_error_types/wrap_error.html"><strong aria-hidden="true">5.18.4.5.</strong> Wrapping errors</a></li></ol></li><li><a href="../rustexample/error/iter_result.html"><strong aria-hidden="true">5.18.5.</strong> Iterating over Results</a></li></ol></li><li><a href="../rustexample/std.html"><strong aria-hidden="true">5.19.</strong> Std library types</a></li><li><ol class="section"><li><a href="../rustexample/std/box.html"><strong aria-hidden="true">5.19.1.</strong> Box, stack and heap</a></li><li><a href="../rustexample/std/vec.html"><strong aria-hidden="true">5.19.2.</strong> Vectors</a></li><li><a href="../rustexample/std/str.html"><strong aria-hidden="true">5.19.3.</strong> Strings</a></li><li><a href="../rustexample/std/option.html"><strong aria-hidden="true">5.19.4.</strong> Option</a></li><li><a href="../rustexample/std/result.html"><strong aria-hidden="true">5.19.5.</strong> Result</a></li><li><ol class="section"><li><a href="../rustexample/std/result/question_mark.html"><strong aria-hidden="true">5.19.5.1.</strong> ?</a></li></ol></li><li><a href="../rustexample/std/panic.html"><strong aria-hidden="true">5.19.6.</strong> panic!</a></li><li><a href="../rustexample/std/hash.html"><strong aria-hidden="true">5.19.7.</strong> HashMap</a></li><li><ol class="section"><li><a href="../rustexample/std/hash/alt_key_types.html"><strong aria-hidden="true">5.19.7.1.</strong> Alternate/custom key types</a></li><li><a href="../rustexample/std/hash/hashset.html"><strong aria-hidden="true">5.19.7.2.</strong> HashSet</a></li></ol></li></ol></li><li><a href="../rustexample/std_misc.html"><strong aria-hidden="true">5.20.</strong> Std misc</a></li><li><ol class="section"><li><a href="../rustexample/std_misc/threads.html"><strong aria-hidden="true">5.20.1.</strong> Threads</a></li><li><ol class="section"><li><a href="../rustexample/std_misc/threads/testcase_mapreduce.html"><strong aria-hidden="true">5.20.1.1.</strong> Testcase: map-reduce</a></li></ol></li><li><a href="../rustexample/std_misc/channels.html"><strong aria-hidden="true">5.20.2.</strong> Channels</a></li><li><a href="../rustexample/std_misc/path.html"><strong aria-hidden="true">5.20.3.</strong> Path</a></li><li><a href="../rustexample/std_misc/file.html"><strong aria-hidden="true">5.20.4.</strong> File I/O</a></li><li><ol class="section"><li><a href="../rustexample/std_misc/file/open.html"><strong aria-hidden="true">5.20.4.1.</strong> open</a></li><li><a href="../rustexample/std_misc/file/create.html"><strong aria-hidden="true">5.20.4.2.</strong> create</a></li><li><a href="../rustexample/std_misc/file/read_lines.html"><strong aria-hidden="true">5.20.4.3.</strong> read lines</a></li></ol></li><li><a href="../rustexample/std_misc/process.html"><strong aria-hidden="true">5.20.5.</strong> Child processes</a></li><li><ol class="section"><li><a href="../rustexample/std_misc/process/pipe.html"><strong aria-hidden="true">5.20.5.1.</strong> Pipes</a></li><li><a href="../rustexample/std_misc/process/wait.html"><strong aria-hidden="true">5.20.5.2.</strong> Wait</a></li></ol></li><li><a href="../rustexample/std_misc/fs.html"><strong aria-hidden="true">5.20.6.</strong> Filesystem Operations</a></li><li><a href="../rustexample/std_misc/arg.html"><strong aria-hidden="true">5.20.7.</strong> Program arguments</a></li><li><ol class="section"><li><a href="../rustexample/std_misc/arg/matching.html"><strong aria-hidden="true">5.20.7.1.</strong> Argument parsing</a></li></ol></li><li><a href="../rustexample/std_misc/ffi.html"><strong aria-hidden="true">5.20.8.</strong> Foreign Function Interface</a></li></ol></li><li><a href="../rustexample/testing.html"><strong aria-hidden="true">5.21.</strong> Testing</a></li><li><ol class="section"><li><a href="../rustexample/testing/unit_testing.html"><strong aria-hidden="true">5.21.1.</strong> Unit testing</a></li><li><a href="../rustexample/testing/doc_testing.html"><strong aria-hidden="true">5.21.2.</strong> Documentation testing</a></li><li><a href="../rustexample/testing/integration_testing.html"><strong aria-hidden="true">5.21.3.</strong> Integration testing</a></li><li><a href="../rustexample/testing/dev_dependencies.html"><strong aria-hidden="true">5.21.4.</strong> Dev-dependencies</a></li></ol></li><li><a href="../rustexample/unsafe.html"><strong aria-hidden="true">5.22.</strong> Unsafe Operations</a></li><li><a href="../rustexample/compatibility.html"><strong aria-hidden="true">5.23.</strong> Compatibility</a></li><li><ol class="section"><li><a href="../rustexample/compatibility/raw_identifiers.html"><strong aria-hidden="true">5.23.1.</strong> Raw identifiers</a></li></ol></li><li><a href="../rustexample/meta.html"><strong aria-hidden="true">5.24.</strong> Meta</a></li><li><ol class="section"><li><a href="../rustexample/meta/doc.html"><strong aria-hidden="true">5.24.1.</strong> Documentation</a></li></ol></li></ol></li><li><a href="../rustbook/ch00-00-introduction.html"><strong aria-hidden="true">6.</strong> Rust Programming Language Book</a></li><li><ol class="section"><li><a href="../rustbook/ch01-00-getting-started.html"><strong aria-hidden="true">6.1.</strong> Getting Started</a></li><li><ol class="section"><li><a href="../rustbook/ch01-01-installation.html"><strong aria-hidden="true">6.1.1.</strong> Installation</a></li><li><a href="../rustbook/ch01-02-hello-world.html"><strong aria-hidden="true">6.1.2.</strong> Hello, World!</a></li><li><a href="../rustbook/ch01-03-hello-cargo.html"><strong aria-hidden="true">6.1.3.</strong> Hello, Cargo!</a></li></ol></li><li><a href="../rustbook/ch02-00-guessing-game-tutorial.html"><strong aria-hidden="true">6.2.</strong> Programming a Guessing Game</a></li><li><a href="../rustbook/ch03-00-common-programming-concepts.html"><strong aria-hidden="true">6.3.</strong> Common Programming Concepts</a></li><li><ol class="section"><li><a href="../rustbook/ch03-01-variables-and-mutability.html"><strong aria-hidden="true">6.3.1.</strong> Variables and Mutability</a></li><li><a href="../rustbook/ch03-02-data-types.html"><strong aria-hidden="true">6.3.2.</strong> Data Types</a></li><li><a href="../rustbook/ch03-03-how-functions-work.html"><strong aria-hidden="true">6.3.3.</strong> Functions</a></li><li><a href="../rustbook/ch03-04-comments.html"><strong aria-hidden="true">6.3.4.</strong> Comments</a></li><li><a href="../rustbook/ch03-05-control-flow.html"><strong aria-hidden="true">6.3.5.</strong> Control Flow</a></li></ol></li><li><a href="../rustbook/ch04-00-understanding-ownership.html"><strong aria-hidden="true">6.4.</strong> Understanding Ownership</a></li><li><ol class="section"><li><a href="../rustbook/ch04-01-what-is-ownership.html"><strong aria-hidden="true">6.4.1.</strong> What is Ownership?</a></li><li><a href="../rustbook/ch04-02-references-and-borrowing.html"><strong aria-hidden="true">6.4.2.</strong> References and Borrowing</a></li><li><a href="../rustbook/ch04-03-slices.html"><strong aria-hidden="true">6.4.3.</strong> The Slice Type</a></li></ol></li><li><a href="../rustbook/ch05-00-structs.html"><strong aria-hidden="true">6.5.</strong> Using Structs to Structure Related Data</a></li><li><ol class="section"><li><a href="../rustbook/ch05-01-defining-structs.html"><strong aria-hidden="true">6.5.1.</strong> Defining and Instantiating Structs</a></li><li><a href="../rustbook/ch05-02-example-structs.html"><strong aria-hidden="true">6.5.2.</strong> An Example Program Using Structs</a></li><li><a href="../rustbook/ch05-03-method-syntax.html"><strong aria-hidden="true">6.5.3.</strong> Method Syntax</a></li></ol></li><li><a href="../rustbook/ch06-00-enums.html"><strong aria-hidden="true">6.6.</strong> Enums and Pattern Matching</a></li><li><ol class="section"><li><a href="../rustbook/ch06-01-defining-an-enum.html"><strong aria-hidden="true">6.6.1.</strong> Defining an Enum</a></li><li><a href="../rustbook/ch06-02-match.html"><strong aria-hidden="true">6.6.2.</strong> The match Control Flow Operator</a></li><li><a href="../rustbook/ch06-03-if-let.html"><strong aria-hidden="true">6.6.3.</strong> Concise Control Flow with if let</a></li></ol></li><li><a href="../rustbook/ch07-00-managing-growing-projects-with-packages-crates-and-modules.html"><strong aria-hidden="true">6.7.</strong> Managing Growing Projects with Packages Crates and Modules</a></li><li><ol class="section"><li><a href="../rustbook/ch07-01-packages-and-crates.html"><strong aria-hidden="true">6.7.1.</strong> Packages and Crates</a></li><li><a href="../rustbook/ch07-02-defining-modules-to-control-scope-and-privacy.html"><strong aria-hidden="true">6.7.2.</strong> Defining Modules to Control Scope and Privacy</a></li><li><a href="../rustbook/ch07-03-paths-for-referring-to-an-item-in-the-module-tree.html"><strong aria-hidden="true">6.7.3.</strong> Paths for Referring to an Item in the Module Tree</a></li><li><a href="../rustbook/ch07-04-bringing-paths-into-scope-with-the-use-keyword.html"><strong aria-hidden="true">6.7.4.</strong> Bringing Paths Into Scope with the use Keyword</a></li><li><a href="../rustbook/ch07-05-separating-modules-into-different-files.html"><strong aria-hidden="true">6.7.5.</strong> Separating Modules into Different Files</a></li></ol></li><li><a href="../rustbook/ch08-00-common-collections.html"><strong aria-hidden="true">6.8.</strong> Common Collections</a></li><li><ol class="section"><li><a href="../rustbook/ch08-01-vectors.html"><strong aria-hidden="true">6.8.1.</strong> Storing Lists of Values with Vectors</a></li><li><a href="../rustbook/ch08-02-strings.html"><strong aria-hidden="true">6.8.2.</strong> Storing UTF-8 Encoded Text with Strings</a></li><li><a href="../rustbook/ch08-03-hash-maps.html"><strong aria-hidden="true">6.8.3.</strong> Storing Keys with Associated Values in Hash Maps</a></li></ol></li><li><a href="../rustbook/ch09-00-error-handling.html"><strong aria-hidden="true">6.9.</strong> Error Handling</a></li><li><ol class="section"><li><a href="../rustbook/ch09-01-unrecoverable-errors-with-panic.html"><strong aria-hidden="true">6.9.1.</strong> Unrecoverable Errors with panic!</a></li><li><a href="../rustbook/ch09-02-recoverable-errors-with-result.html"><strong aria-hidden="true">6.9.2.</strong> Recoverable Errors with Result</a></li><li><a href="../rustbook/ch09-03-to-panic-or-not-to-panic.html"><strong aria-hidden="true">6.9.3.</strong> To panic! or Not To panic!</a></li></ol></li><li><a href="../rustbook/ch10-00-generics.html"><strong aria-hidden="true">6.10.</strong> Generic Types, Traits, and Lifetimes</a></li><li><ol class="section"><li><a href="../rustbook/ch10-01-syntax.html"><strong aria-hidden="true">6.10.1.</strong> Generic Data Types</a></li><li><a href="../rustbook/ch10-02-traits.html"><strong aria-hidden="true">6.10.2.</strong> Traits: Defining Shared Behavior</a></li><li><a href="../rustbook/ch10-03-lifetime-syntax.html"><strong aria-hidden="true">6.10.3.</strong> Validating References with Lifetimes</a></li></ol></li><li><a href="../rustbook/ch11-00-testing.html"><strong aria-hidden="true">6.11.</strong> Writing Automated Tests</a></li><li><ol class="section"><li><a href="../rustbook/ch11-01-writing-tests.html"><strong aria-hidden="true">6.11.1.</strong> How to Write Tests</a></li><li><a href="../rustbook/ch11-02-running-tests.html"><strong aria-hidden="true">6.11.2.</strong> Controlling How Tests Are Run</a></li><li><a href="../rustbook/ch11-03-test-organization.html"><strong aria-hidden="true">6.11.3.</strong> Test Organization</a></li></ol></li><li><a href="../rustbook/ch12-00-an-io-project.html"><strong aria-hidden="true">6.12.</strong> An I/O Project: Building a Command Line Program</a></li><li><ol class="section"><li><a href="../rustbook/ch12-01-accepting-command-line-arguments.html"><strong aria-hidden="true">6.12.1.</strong> Accepting Command Line Arguments</a></li><li><a href="../rustbook/ch12-02-reading-a-file.html"><strong aria-hidden="true">6.12.2.</strong> Reading a File</a></li><li><a href="../rustbook/ch12-03-improving-error-handling-and-modularity.html"><strong aria-hidden="true">6.12.3.</strong> Refactoring to Improve Modularity and Error Handling</a></li><li><a href="../rustbook/ch12-04-testing-the-librarys-functionality.html"><strong aria-hidden="true">6.12.4.</strong> Developing the Library’s Functionality with Test Driven Development</a></li><li><a href="../rustbook/ch12-05-working-with-environment-variables.html"><strong aria-hidden="true">6.12.5.</strong> Working with Environment Variables</a></li><li><a href="../rustbook/ch12-06-writing-to-stderr-instead-of-stdout.html"><strong aria-hidden="true">6.12.6.</strong> Writing Error Messages to Standard Error Instead of Standard Output</a></li></ol></li><li><a href="../rustbook/ch13-00-functional-features.html"><strong aria-hidden="true">6.13.</strong> Functional Language Features  Iterators and Closures</a></li><li><ol class="section"><li><a href="../rustbook/ch13-01-closures.html"><strong aria-hidden="true">6.13.1.</strong> Closures: Anonymous Functions that Can Capture Their Environment</a></li><li><a href="../rustbook/ch13-02-iterators.html"><strong aria-hidden="true">6.13.2.</strong> Processing a Series of Items with Iterators</a></li><li><a href="../rustbook/ch13-03-improving-our-io-project.html"><strong aria-hidden="true">6.13.3.</strong> Improving Our I/O Project</a></li><li><a href="../rustbook/ch13-04-performance.html"><strong aria-hidden="true">6.13.4.</strong> Comparing Performance: Loops vs. Iterators</a></li></ol></li><li><a href="../rustbook/ch14-00-more-about-cargo.html"><strong aria-hidden="true">6.14.</strong> More about Cargo and Crates.io</a></li><li><ol class="section"><li><a href="../rustbook/ch14-01-release-profiles.html"><strong aria-hidden="true">6.14.1.</strong> Customizing Builds with Release Profiles</a></li><li><a href="../rustbook/ch14-02-publishing-to-crates-io.html"><strong aria-hidden="true">6.14.2.</strong> Publishing a Crate to Crates.io</a></li><li><a href="../rustbook/ch14-03-cargo-workspaces.html"><strong aria-hidden="true">6.14.3.</strong> Cargo Workspaces</a></li><li><a href="../rustbook/ch14-04-installing-binaries.html"><strong aria-hidden="true">6.14.4.</strong> Installing Binaries from Crates.io with cargo install</a></li><li><a href="../rustbook/ch14-05-extending-cargo.html"><strong aria-hidden="true">6.14.5.</strong> Extending Cargo with Custom Commands</a></li></ol></li><li><a href="../rustbook/ch15-00-smart-pointers.html"><strong aria-hidden="true">6.15.</strong> Smart Pointers</a></li><li><ol class="section"><li><a href="../rustbook/ch15-01-box.html"><strong aria-hidden="true">6.15.1.</strong> Using Box<T> to Point to Data on the Heap</a></li><li><a href="../rustbook/ch15-02-deref.html"><strong aria-hidden="true">6.15.2.</strong> Treating Smart Pointers Like Regular References with the Deref Trait</a></li><li><a href="../rustbook/ch15-03-drop.html"><strong aria-hidden="true">6.15.3.</strong> Running Code on Cleanup with the Drop Trait</a></li><li><a href="../rustbook/ch15-04-rc.html"><strong aria-hidden="true">6.15.4.</strong> Rc<T>, the Reference Counted Smart Pointer</a></li><li><a href="../rustbook/ch15-05-interior-mutability.html"><strong aria-hidden="true">6.15.5.</strong> RefCell<T> and the Interior Mutability Pattern</a></li><li><a href="../rustbook/ch15-06-reference-cycles.html"><strong aria-hidden="true">6.15.6.</strong> Reference Cycles Can Leak Memory</a></li></ol></li><li><a href="../rustbook/ch16-00-concurrency.html"><strong aria-hidden="true">6.16.</strong> Fearless Concurrency</a></li><li><ol class="section"><li><a href="../rustbook/ch16-01-threads.html"><strong aria-hidden="true">6.16.1.</strong> Using Threads to Run Code Simultaneously</a></li><li><a href="../rustbook/ch16-02-message-passing.html"><strong aria-hidden="true">6.16.2.</strong> Using Message Passing to Transfer Data Between Threads</a></li><li><a href="../rustbook/ch16-03-shared-state.html"><strong aria-hidden="true">6.16.3.</strong> Shared-State Concurrency</a></li><li><a href="../rustbook/ch16-04-extensible-concurrency-sync-and-send.html"><strong aria-hidden="true">6.16.4.</strong> Extensible Concurrency with the Sync and Send Traits</a></li></ol></li><li><a href="../rustbook/ch17-00-oop.html"><strong aria-hidden="true">6.17.</strong> Object Oriented Programming Features of Rust</a></li><li><ol class="section"><li><a href="../rustbook/ch17-01-what-is-oo.html"><strong aria-hidden="true">6.17.1.</strong> Characteristics of Object-Oriented Languages</a></li><li><a href="../rustbook/ch17-02-trait-objects.html"><strong aria-hidden="true">6.17.2.</strong> Using Trait Objects That Allow for Values of Different Types</a></li><li><a href="../rustbook/ch17-03-oo-design-patterns.html"><strong aria-hidden="true">6.17.3.</strong> Implementing an Object-Oriented Design Pattern</a></li></ol></li><li><a href="../rustbook/ch18-00-patterns.html"><strong aria-hidden="true">6.18.</strong> Patterns and Matching</a></li><li><ol class="section"><li><a href="../rustbook/ch18-01-all-the-places-for-patterns.html"><strong aria-hidden="true">6.18.1.</strong> All the Places Patterns Can Be Used</a></li><li><a href="../rustbook/ch18-02-refutability.html"><strong aria-hidden="true">6.18.2.</strong> Refutability: Whether a Pattern Might Fail to Match</a></li><li><a href="../rustbook/ch18-03-pattern-syntax.html"><strong aria-hidden="true">6.18.3.</strong> Pattern Syntax</a></li></ol></li><li><a href="../rustbook/ch19-00-advanced-features.html"><strong aria-hidden="true">6.19.</strong> Advanced Features</a></li><li><ol class="section"><li><a href="../rustbook/ch19-01-unsafe-rust.html"><strong aria-hidden="true">6.19.1.</strong> Unsafe Rust</a></li><li><a href="../rustbook/ch19-03-advanced-traits.html"><strong aria-hidden="true">6.19.2.</strong> Advanced Traits</a></li><li><a href="../rustbook/ch19-04-advanced-types.html"><strong aria-hidden="true">6.19.3.</strong> Advanced Types</a></li><li><a href="../rustbook/ch19-05-advanced-functions-and-closures.html"><strong aria-hidden="true">6.19.4.</strong> Advanced Functions and Closures</a></li><li><a href="../rustbook/ch19-06-macros.html"><strong aria-hidden="true">6.19.5.</strong> Macros</a></li></ol></li><li><a href="../rustbook/ch20-00-final-project-a-web-server.html"><strong aria-hidden="true">6.20.</strong> Final Project: Building a Multithreaded Web Server</a></li><li><ol class="section"><li><a href="../rustbook/ch20-01-single-threaded.html" class="active"><strong aria-hidden="true">6.20.1.</strong> Building a Single-Threaded Web Server</a></li><li><a href="../rustbook/ch20-02-multithreaded.html"><strong aria-hidden="true">6.20.2.</strong> Turning Our Single-Threaded Server into a Multithreaded Server</a></li><li><a href="../rustbook/ch20-03-graceful-shutdown-and-cleanup.html"><strong aria-hidden="true">6.20.3.</strong> Graceful Shutdown and Cleanup</a></li></ol></li><li><a href="../rustbook/appendix-00.html"><strong aria-hidden="true">6.21.</strong> Appendix</a></li><li><ol class="section"><li><a href="../rustbook/appendix-01-keywords.html"><strong aria-hidden="true">6.21.1.</strong> A - Keywords</a></li><li><a href="../rustbook/appendix-02-operators.html"><strong aria-hidden="true">6.21.2.</strong> B - Operators and Symbols</a></li><li><a href="../rustbook/appendix-03-derivable-traits.html"><strong aria-hidden="true">6.21.3.</strong> C - Derivable Traits</a></li><li><a href="../rustbook/appendix-04-useful-development-tools.html"><strong aria-hidden="true">6.21.4.</strong> D - Useful Development Tools</a></li><li><a href="../rustbook/appendix-05-editions.html"><strong aria-hidden="true">6.21.5.</strong> E - Editions</a></li><li><a href="../rustbook/appendix-06-translation.html"><strong aria-hidden="true">6.21.6.</strong> F - Translations of the Book</a></li><li><a href="../rustbook/appendix-07-nightly-rust.html"><strong aria-hidden="true">6.21.7.</strong> G - How Rust is Made and “Nightly Rust”</a></li></ol></li></ol></li><li><a href="../rustdoc-2018/index.html"><strong aria-hidden="true">7.</strong> Rust Doc 2018</a></li><li><ol class="section"><li><a href="../rustdoc-2018/edition-changes.html"><strong aria-hidden="true">7.1.</strong> 2018-Specific Changes</a></li><li><a href="../rustdoc-2018/module-system/index.html"><strong aria-hidden="true">7.2.</strong> Module system</a></li><li><ol class="section"><li><a href="../rustdoc-2018/module-system/raw-identifiers.html"><strong aria-hidden="true">7.2.1.</strong> Raw identifiers</a></li><li><a href="../rustdoc-2018/module-system/path-clarity.html"><strong aria-hidden="true">7.2.2.</strong> Path clarity</a></li><li><a href="../rustdoc-2018/module-system/more-visibility-modifiers.html"><strong aria-hidden="true">7.2.3.</strong> More visibility modifiers</a></li><li><a href="../rustdoc-2018/module-system/nested-imports-with-use.html"><strong aria-hidden="true">7.2.4.</strong> Nested imports with use</a></li></ol></li><li><a href="../rustdoc-2018/error-handling-and-panics/index.html"><strong aria-hidden="true">7.3.</strong> Error handling and panics</a></li><li><ol class="section"><li><a href="../rustdoc-2018/error-handling-and-panics/the-question-mark-operator-for-easier-error-handling.html"><strong aria-hidden="true">7.3.1.</strong> The ? operator for easier error handling</a></li><li><a href="../rustdoc-2018/error-handling-and-panics/question-mark-in-main-and-tests.html"><strong aria-hidden="true">7.3.2.</strong> ? in main and tests</a></li><li><a href="../rustdoc-2018/error-handling-and-panics/controlling-panics-with-std-panic.html"><strong aria-hidden="true">7.3.3.</strong> Controlling panics with std::panic</a></li><li><a href="../rustdoc-2018/error-handling-and-panics/aborting-on-panic.html"><strong aria-hidden="true">7.3.4.</strong> Aborting on panic</a></li></ol></li><li><a href="../rustdoc-2018/control-flow/index.html"><strong aria-hidden="true">7.4.</strong> Control flow</a></li><li><ol class="section"><li><a href="../rustdoc-2018/control-flow/loops-can-break-with-a-value.html"><strong aria-hidden="true">7.4.1.</strong> Loops can break with a value</a></li><li><a href="../rustdoc-2018/control-flow/async-await-for-easier-concurrency.html"><strong aria-hidden="true">7.4.2.</strong> async/await for easier concurrency</a></li></ol></li><li><a href="../rustdoc-2018/trait-system/index.html"><strong aria-hidden="true">7.5.</strong> Trait system</a></li><li><ol class="section"><li><a href="../rustdoc-2018/trait-system/impl-trait-for-returning-complex-types-with-ease.html"><strong aria-hidden="true">7.5.1.</strong> impl Trait for returning complex types with ease</a></li><li><a href="../rustdoc-2018/trait-system/dyn-trait-for-trait-objects.html"><strong aria-hidden="true">7.5.2.</strong> dyn Trait for trait objects</a></li><li><a href="../rustdoc-2018/trait-system/more-container-types-support-trait-objects.html"><strong aria-hidden="true">7.5.3.</strong> More container types support trait objects</a></li><li><a href="../rustdoc-2018/trait-system/associated-constants.html"><strong aria-hidden="true">7.5.4.</strong> Associated constants</a></li><li><a href="../rustdoc-2018/trait-system/no-anon-params.html"><strong aria-hidden="true">7.5.5.</strong> No more anonymous parameters</a></li></ol></li><li><a href="../rustdoc-2018/slice-patterns.html"><strong aria-hidden="true">7.6.</strong> Slice patterns</a></li><li><a href="../rustdoc-2018/ownership-and-lifetimes/index.html"><strong aria-hidden="true">7.7.</strong> Ownership and lifetimes</a></li><li><ol class="section"><li><a href="../rustdoc-2018/ownership-and-lifetimes/non-lexical-lifetimes.html"><strong aria-hidden="true">7.7.1.</strong> Non-lexical lifetimes</a></li><li><a href="../rustdoc-2018/ownership-and-lifetimes/default-match-bindings.html"><strong aria-hidden="true">7.7.2.</strong> Default match bindings</a></li><li><a href="../rustdoc-2018/ownership-and-lifetimes/the-anonymous-lifetime.html"><strong aria-hidden="true">7.7.3.</strong> '_, the anonymous lifetime</a></li><li><a href="../rustdoc-2018/ownership-and-lifetimes/lifetime-elision-in-impl.html"><strong aria-hidden="true">7.7.4.</strong> Lifetime elision in impl</a></li><li><a href="../rustdoc-2018/ownership-and-lifetimes/inference-in-structs.html"><strong aria-hidden="true">7.7.5.</strong> T: 'a inference in structs</a></li><li><a href="../rustdoc-2018/ownership-and-lifetimes/simpler-lifetimes-in-static-and-const.html"><strong aria-hidden="true">7.7.6.</strong> Simpler lifetimes in static and const</a></li></ol></li><li><a href="../rustdoc-2018/data-types/index.html"><strong aria-hidden="true">7.8.</strong> Data types</a></li><li><ol class="section"><li><a href="../rustdoc-2018/data-types/field-init-shorthand.html"><strong aria-hidden="true">7.8.1.</strong> Field init shorthand</a></li><li><a href="../rustdoc-2018/data-types/inclusive-ranges.html"><strong aria-hidden="true">7.8.2.</strong> ..= for inclusive ranges</a></li><li><a href="../rustdoc-2018/data-types/128-bit-integers.html"><strong aria-hidden="true">7.8.3.</strong> 128 bit integers</a></li><li><a href="../rustdoc-2018/data-types/operator-equals-are-now-implementable.html"><strong aria-hidden="true">7.8.4.</strong> &quot;Operator-equals&quot; are now implementable</a></li><li><a href="../rustdoc-2018/data-types/union-for-an-unsafe-form-of-enum.html"><strong aria-hidden="true">7.8.5.</strong> union for an unsafe form of enum</a></li><li><a href="../rustdoc-2018/data-types/choosing-alignment-with-the-repr-attribute.html"><strong aria-hidden="true">7.8.6.</strong> Choosing alignment with the repr attribute</a></li></ol></li><li><a href="../rustdoc-2018/simd-for-faster-computing.html"><strong aria-hidden="true">7.9.</strong> SIMD for faster computing</a></li><li><a href="../rustdoc-2018/macros/index.html"><strong aria-hidden="true">7.10.</strong> Macros</a></li><li><ol class="section"><li><a href="../rustdoc-2018/macros/custom-derive.html"><strong aria-hidden="true">7.10.1.</strong> Custom Derive</a></li><li><a href="../rustdoc-2018/macros/macro-changes.html"><strong aria-hidden="true">7.10.2.</strong> Macro changes</a></li><li><a href="../rustdoc-2018/macros/at-most-once.html"><strong aria-hidden="true">7.10.3.</strong> At most one repetition</a></li></ol></li><li><a href="../rustdoc-2018/the-compiler/index.html"><strong aria-hidden="true">7.11.</strong> The compiler</a></li><li><ol class="section"><li><a href="../rustdoc-2018/the-compiler/improved-error-messages.html"><strong aria-hidden="true">7.11.1.</strong> Improved error messages</a></li><li><a href="../rustdoc-2018/the-compiler/incremental-compilation-for-faster-compiles.html"><strong aria-hidden="true">7.11.2.</strong> Incremental Compilation for faster compiles</a></li><li><a href="../rustdoc-2018/the-compiler/an-attribute-for-deprecation.html"><strong aria-hidden="true">7.11.3.</strong> An attribute for deprecation</a></li></ol></li><li><a href="../rustdoc-2018/rustup-for-managing-rust-versions.html"><strong aria-hidden="true">7.12.</strong> Rustup for managing Rust versions</a></li><li><a href="../rustdoc-2018/cargo-and-crates-io/index.html"><strong aria-hidden="true">7.13.</strong> Cargo and crates.io</a></li><li><ol class="section"><li><a href="../rustdoc-2018/cargo-and-crates-io/cargo-check-for-faster-checking.html"><strong aria-hidden="true">7.13.1.</strong> cargo check for faster checking</a></li><li><a href="../rustdoc-2018/cargo-and-crates-io/cargo-install-for-easy-installation-of-tools.html"><strong aria-hidden="true">7.13.2.</strong> cargo install for easy installation of tools</a></li><li><a href="../rustdoc-2018/cargo-and-crates-io/cargo-new-defaults-to-a-binary-project.html"><strong aria-hidden="true">7.13.3.</strong> cargo new defaults to a binary project</a></li><li><a href="../rustdoc-2018/cargo-and-crates-io/cargo-rustc-for-passing-arbitrary-flags-to-rustc.html"><strong aria-hidden="true">7.13.4.</strong> cargo rustc for passing arbitrary flags to rustc</a></li><li><a href="../rustdoc-2018/cargo-and-crates-io/cargo-workspaces-for-multi-package-projects.html"><strong aria-hidden="true">7.13.5.</strong> Cargo workspaces for multi-package projects</a></li><li><a href="../rustdoc-2018/cargo-and-crates-io/multi-file-examples.html"><strong aria-hidden="true">7.13.6.</strong> Multi-file examples</a></li><li><a href="../rustdoc-2018/cargo-and-crates-io/replacing-dependencies-with-patch.html"><strong aria-hidden="true">7.13.7.</strong> Replacing dependencies with patch</a></li><li><a href="../rustdoc-2018/cargo-and-crates-io/cargo-can-use-a-local-registry-replacement.html"><strong aria-hidden="true">7.13.8.</strong> Cargo can use a local registry replacement</a></li><li><a href="../rustdoc-2018/cargo-and-crates-io/crates-io-disallows-wildcard-dependencies.html"><strong aria-hidden="true">7.13.9.</strong> Crates.io disallows wildcard dependencies</a></li></ol></li><li><a href="../rustdoc-2018/documentation/index.html"><strong aria-hidden="true">7.14.</strong> Documentation</a></li><li><ol class="section"><li><a href="../rustdoc-2018/documentation/new-editions-of-the-book.html"><strong aria-hidden="true">7.14.1.</strong> New editions of the &quot;the book&quot;</a></li><li><a href="../rustdoc-2018/documentation/the-rust-bookshelf.html"><strong aria-hidden="true">7.14.2.</strong> The Rust Bookshelf</a></li><li><a href="../rustdoc-2018/documentation/the-rustonomicon.html"><strong aria-hidden="true">7.14.3.</strong> The Rustonomicon</a></li><li><a href="../rustdoc-2018/documentation/std-os-has-documentation-for-all-platforms.html"><strong aria-hidden="true">7.14.4.</strong> Full documentation for std::os</a></li></ol></li><li><a href="../rustdoc-2018/rustdoc/index.html"><strong aria-hidden="true">7.15.</strong> rustdoc</a></li><li><ol class="section"><li><a href="../rustdoc-2018/rustdoc/documentation-tests-can-now-compile-fail.html"><strong aria-hidden="true">7.15.1.</strong> Documentation tests can now compile-fail</a></li><li><a href="../rustdoc-2018/rustdoc/rustdoc-uses-commonmark.html"><strong aria-hidden="true">7.15.2.</strong> Rustdoc uses CommonMark</a></li></ol></li><li><a href="../rustdoc-2018/platform-and-target-support/index.html"><strong aria-hidden="true">7.16.</strong> Platform and target support</a></li><li><ol class="section"><li><a href="../rustdoc-2018/platform-and-target-support/libcore-for-low-level-rust.html"><strong aria-hidden="true">7.16.1.</strong> libcore for low-level Rust</a></li><li><a href="../rustdoc-2018/platform-and-target-support/webassembly-support.html"><strong aria-hidden="true">7.16.2.</strong> WebAssembly support</a></li><li><a href="../rustdoc-2018/platform-and-target-support/global-allocators.html"><strong aria-hidden="true">7.16.3.</strong> Global allocators</a></li><li><a href="../rustdoc-2018/platform-and-target-support/msvc-toolchain-support.html"><strong aria-hidden="true">7.16.4.</strong> MSVC toolchain support</a></li><li><a href="../rustdoc-2018/platform-and-target-support/musl-support-for-fully-static-binaries.html"><strong aria-hidden="true">7.16.5.</strong> MUSL support for fully static binaries</a></li><li><a href="../rustdoc-2018/platform-and-target-support/cdylib-crates-for-c-interoperability.html"><strong aria-hidden="true">7.16.6.</strong> cdylib crates for C interoperability</a></li></ol></li></ol></li><li><a href="../rustc-guide/about-this-guide.html"><strong aria-hidden="true">8.</strong> rustc guide</a></li><li><ol class="section"><li><a href="../rustc-guide/part-1-intro.html"><strong aria-hidden="true">8.1.</strong> Part 1: Building, debugging, and contributing to Rustc</a></li><li><ol class="section"><li><a href="../rustc-guide/compiler-team.html"><strong aria-hidden="true">8.1.1.</strong> About the compiler team</a></li><li><a href="../rustc-guide/how-to-build-and-run.html"><strong aria-hidden="true">8.1.2.</strong> How to Build and Run the Compiler</a></li><li><ol class="section"><li><a href="../rustc-guide/build-install-distribution-artifacts.html"><strong aria-hidden="true">8.1.2.1.</strong> Build and Install distribution artifacts</a></li><li><a href="../rustc-guide/compiler-documenting.html"><strong aria-hidden="true">8.1.2.2.</strong> Documenting Compiler</a></li></ol></li><li><a href="../rustc-guide/tests/intro.html"><strong aria-hidden="true">8.1.3.</strong> The compiler testing framework</a></li><li><ol class="section"><li><a href="../rustc-guide/tests/running.html"><strong aria-hidden="true">8.1.3.1.</strong> Running tests</a></li><li><a href="../rustc-guide/tests/adding.html"><strong aria-hidden="true">8.1.3.2.</strong> Adding new tests</a></li><li><a href="../rustc-guide/compiletest.html"><strong aria-hidden="true">8.1.3.3.</strong> Using compiletest + commands to control test execution</a></li></ol></li><li><a href="../rustc-guide/walkthrough.html"><strong aria-hidden="true">8.1.4.</strong> Walkthrough: a typical contribution</a></li><li><a href="../rustc-guide/implementing_new_features.html"><strong aria-hidden="true">8.1.5.</strong> Implementing new features</a></li><li><a href="../rustc-guide/stabilization_guide.html"><strong aria-hidden="true">8.1.6.</strong> Stabilizing Features</a></li><li><a href="../rustc-guide/compiler-debugging.html"><strong aria-hidden="true">8.1.7.</strong> Debugging the Compiler</a></li><li><a href="../rustc-guide/profiling.html"><strong aria-hidden="true">8.1.8.</strong> Profiling the compiler</a></li><li><ol class="section"><li><a href="../rustc-guide/profiling/with_perf.html"><strong aria-hidden="true">8.1.8.1.</strong> with the linux perf tool</a></li></ol></li><li><a href="../rustc-guide/conventions.html"><strong aria-hidden="true">8.1.9.</strong> Coding conventions</a></li><li><a href="../rustc-guide/crates-io.html"><strong aria-hidden="true">8.1.10.</strong> crates.io Dependencies</a></li><li><a href="../rustc-guide/diagnostics.html"><strong aria-hidden="true">8.1.11.</strong> Emitting Errors and other Diagnostics</a></li><li><ol class="section"><li><a href="../rustc-guide/diagnostics/json-format.html"><strong aria-hidden="true">8.1.11.1.</strong> JSON diagnostic format</a></li></ol></li></ol></li><li><a href="../rustc-guide/part-2-intro.html"><strong aria-hidden="true">8.2.</strong> Part 2: How rustc works</a></li><li><ol class="section"><li><a href="../rustc-guide/high-level-overview.html"><strong aria-hidden="true">8.2.1.</strong> High-level overview of the compiler source</a></li><li><a href="../rustc-guide/rustc-driver.html"><strong aria-hidden="true">8.2.2.</strong> The Rustc Driver and Interface</a></li><li><ol class="section"><li><a href="../rustc-guide/rustdoc.html"><strong aria-hidden="true">8.2.2.1.</strong> Rustdoc</a></li></ol></li><li><a href="../rustc-guide/query.html"><strong aria-hidden="true">8.2.3.</strong> Queries: demand-driven compilation</a></li><li><ol class="section"><li><a href="../rustc-guide/queries/query-evaluation-model-in-detail.html"><strong aria-hidden="true">8.2.3.1.</strong> The Query Evaluation Model in Detail</a></li><li><a href="../rustc-guide/queries/incremental-compilation.html"><strong aria-hidden="true">8.2.3.2.</strong> Incremental compilation</a></li><li><a href="../rustc-guide/queries/incremental-compilation-in-detail.html"><strong aria-hidden="true">8.2.3.3.</strong> Incremental compilation In Detail</a></li><li><a href="../rustc-guide/incrcomp-debugging.html"><strong aria-hidden="true">8.2.3.4.</strong> Debugging and Testing</a></li></ol></li><li><a href="../rustc-guide/the-parser.html"><strong aria-hidden="true">8.2.4.</strong> The parser</a></li><li><a href="../rustc-guide/test-implementation.html"><strong aria-hidden="true">8.2.5.</strong> #[test] Implementation</a></li><li><a href="../rustc-guide/macro-expansion.html"><strong aria-hidden="true">8.2.6.</strong> Macro expansion</a></li><li><a href="../rustc-guide/name-resolution.html"><strong aria-hidden="true">8.2.7.</strong> Name resolution</a></li><li><a href="../rustc-guide/hir.html"><strong aria-hidden="true">8.2.8.</strong> The HIR (High-level IR)</a></li><li><ol class="section"><li><a href="../rustc-guide/lowering.html"><strong aria-hidden="true">8.2.8.1.</strong> Lowering AST to HIR</a></li><li><a href="../rustc-guide/hir-debugging.html"><strong aria-hidden="true">8.2.8.2.</strong> Debugging</a></li></ol></li><li><a href="../rustc-guide/closure.html"><strong aria-hidden="true">8.2.9.</strong> Closure expansion</a></li><li><a href="../rustc-guide/ty.html"><strong aria-hidden="true">8.2.10.</strong> The ty module: representing types</a></li><li><a href="../rustc-guide/kinds.html"><strong aria-hidden="true">8.2.11.</strong> Kinds</a></li><li><a href="../rustc-guide/type-inference.html"><strong aria-hidden="true">8.2.12.</strong> Type inference</a></li><li><a href="../rustc-guide/traits/resolution.html"><strong aria-hidden="true">8.2.13.</strong> Trait solving (old-style)</a></li><li><ol class="section"><li><a href="../rustc-guide/traits/hrtb.html"><strong aria-hidden="true">8.2.13.1.</strong> Higher-ranked trait bounds</a></li><li><a href="../rustc-guide/traits/caching.html"><strong aria-hidden="true">8.2.13.2.</strong> Caching subtleties</a></li><li><a href="../rustc-guide/traits/specialization.html"><strong aria-hidden="true">8.2.13.3.</strong> Specialization</a></li></ol></li><li><a href="../rustc-guide/traits/index.html"><strong aria-hidden="true">8.2.14.</strong> Trait solving (new-style)</a></li><li><ol class="section"><li><a href="../rustc-guide/traits/lowering-to-logic.html"><strong aria-hidden="true">8.2.14.1.</strong> Lowering to logic</a></li><li><ol class="section"><li><a href="../rustc-guide/traits/goals-and-clauses.html"><strong aria-hidden="true">8.2.14.1.1.</strong> Goals and clauses</a></li><li><a href="../rustc-guide/traits/associated-types.html"><strong aria-hidden="true">8.2.14.1.2.</strong> Equality and associated types</a></li><li><a href="../rustc-guide/traits/implied-bounds.html"><strong aria-hidden="true">8.2.14.1.3.</strong> Implied bounds</a></li><li><a href="../rustc-guide/traits/regions.html"><strong aria-hidden="true">8.2.14.1.4.</strong> Region constraints</a></li><li><a href="../rustc-guide/traits/lowering-module.html"><strong aria-hidden="true">8.2.14.1.5.</strong> The lowering module in rustc</a></li><li><a href="../rustc-guide/traits/lowering-rules.html"><strong aria-hidden="true">8.2.14.1.6.</strong> Lowering rules</a></li><li><a href="../rustc-guide/traits/wf.html"><strong aria-hidden="true">8.2.14.1.7.</strong> Well-formedness checking</a></li></ol></li><li><a href="../rustc-guide/traits/canonical-queries.html"><strong aria-hidden="true">8.2.14.2.</strong> Canonical queries</a></li><li><ol class="section"><li><a href="../rustc-guide/traits/canonicalization.html"><strong aria-hidden="true">8.2.14.2.1.</strong> Canonicalization</a></li></ol></li><li><a href="../rustc-guide/traits/slg.html"><strong aria-hidden="true">8.2.14.3.</strong> The SLG solver</a></li><li><a href="../rustc-guide/traits/chalk-overview.html"><strong aria-hidden="true">8.2.14.4.</strong> An Overview of Chalk</a></li><li><a href="../rustc-guide/traits/bibliography.html"><strong aria-hidden="true">8.2.14.5.</strong> Bibliography</a></li></ol></li><li><a href="../rustc-guide/type-checking.html"><strong aria-hidden="true">8.2.15.</strong> Type checking</a></li><li><ol class="section"><li><a href="../rustc-guide/method-lookup.html"><strong aria-hidden="true">8.2.15.1.</strong> Method Lookup</a></li><li><a href="../rustc-guide/variance.html"><strong aria-hidden="true">8.2.15.2.</strong> Variance</a></li><li><a href="../rustc-guide/existential-types.html"><strong aria-hidden="true">8.2.15.3.</strong> Existential Types</a></li></ol></li><li><a href="../rustc-guide/mir/index.html"><strong aria-hidden="true">8.2.16.</strong> The MIR (Mid-level IR)</a></li><li><ol class="section"><li><a href="../rustc-guide/mir/construction.html"><strong aria-hidden="true">8.2.16.1.</strong> MIR construction</a></li><li><a href="../rustc-guide/mir/visitor.html"><strong aria-hidden="true">8.2.16.2.</strong> MIR visitor and traversal</a></li><li><a href="../rustc-guide/mir/passes.html"><strong aria-hidden="true">8.2.16.3.</strong> MIR passes: getting the MIR for a function</a></li><li><a href="../rustc-guide/mir/optimizations.html"><strong aria-hidden="true">8.2.16.4.</strong> MIR optimizations</a></li><li><a href="../rustc-guide/mir/debugging.html"><strong aria-hidden="true">8.2.16.5.</strong> Debugging</a></li></ol></li><li><a href="../rustc-guide/borrow_check.html"><strong aria-hidden="true">8.2.17.</strong> The borrow checker</a></li><li><ol class="section"><li><a href="../rustc-guide/borrow_check/moves_and_initialization.html"><strong aria-hidden="true">8.2.17.1.</strong> Tracking moves and initialization</a></li><li><ol class="section"><li><a href="../rustc-guide/borrow_check/moves_and_initialization/move_paths.html"><strong aria-hidden="true">8.2.17.1.1.</strong> Move paths</a></li></ol></li><li><a href="../rustc-guide/borrow_check/type_check.html"><strong aria-hidden="true">8.2.17.2.</strong> MIR type checker</a></li><li><a href="../rustc-guide/borrow_check/region_inference.html"><strong aria-hidden="true">8.2.17.3.</strong> Region inference</a></li><li><ol class="section"><li><a href="../rustc-guide/borrow_check/region_inference/constraint_propagation.html"><strong aria-hidden="true">8.2.17.3.1.</strong> Constraint propagation</a></li><li><a href="../rustc-guide/borrow_check/region_inference/lifetime_parameters.html"><strong aria-hidden="true">8.2.17.3.2.</strong> Lifetime parameters</a></li><li><a href="../rustc-guide/borrow_check/region_inference/member_constraints.html"><strong aria-hidden="true">8.2.17.3.3.</strong> Member constraints</a></li><li><a href="../rustc-guide/borrow_check/region_inference/placeholders_and_universes.html"><strong aria-hidden="true">8.2.17.3.4.</strong> Placeholders and universes</a></li><li><a href="../rustc-guide/borrow_check/region_inference/closure_constraints.html"><strong aria-hidden="true">8.2.17.3.5.</strong> Closure constraints</a></li><li><a href="../rustc-guide/borrow_check/region_inference/error_reporting.html"><strong aria-hidden="true">8.2.17.3.6.</strong> Errror reporting</a></li></ol></li><li><a href="../rustc-guide/borrow_check/two_phase_borrows.html"><strong aria-hidden="true">8.2.17.4.</strong> Two-phase-borrows</a></li></ol></li><li><a href="../rustc-guide/const-eval.html"><strong aria-hidden="true">8.2.18.</strong> Constant evaluation</a></li><li><ol class="section"><li><a href="../rustc-guide/miri.html"><strong aria-hidden="true">8.2.18.1.</strong> miri const evaluator</a></li></ol></li><li><a href="../rustc-guide/param_env.html"><strong aria-hidden="true">8.2.19.</strong> Parameter Environments</a></li><li><a href="../rustc-guide/codegen.html"><strong aria-hidden="true">8.2.20.</strong> Code Generation</a></li><li><ol class="section"><li><a href="../rustc-guide/codegen/updating-llvm.html"><strong aria-hidden="true">8.2.20.1.</strong> Updating LLVM</a></li><li><a href="../rustc-guide/codegen/debugging.html"><strong aria-hidden="true">8.2.20.2.</strong> Debugging LLVM</a></li></ol></li><li><a href="../rustc-guide/profile-guided-optimization.html"><strong aria-hidden="true">8.2.21.</strong> Profile-guided Optimization</a></li><li><a href="../rustc-guide/debugging-support-in-rustc.html"><strong aria-hidden="true">8.2.22.</strong> Debugging Support in Rust Compiler</a></li></ol></li><li><a href="../rustc-guide/appendix/stupid-stats.html"><strong aria-hidden="true">8.3.</strong> Appendix A: Stupid Stats</a></li><li><a href="../rustc-guide/appendix/background.html"><strong aria-hidden="true">8.4.</strong> Appendix B: Background material</a></li><li><a href="../rustc-guide/appendix/glossary.html"><strong aria-hidden="true">8.5.</strong> Appendix C: Glossary</a></li><li><a href="../rustc-guide/appendix/code-index.html"><strong aria-hidden="true">8.6.</strong> Appendix D: Code Index</a></li><li><a href="../rustc-guide/appendix/bibliography.html"><strong aria-hidden="true">8.7.</strong> Appendix E: Bibliography</a></li><li><a href="../rustc-guide/important-links.html"><strong aria-hidden="true">8.8.</strong> important links</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar" class="menu-bar">
                    <div id="menu-bar-sticky-container">
                        <div class="left-buttons">
                            <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                                <i class="fa fa-bars"></i>
                            </button>
                            <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                                <i class="fa fa-paint-brush"></i>
                            </button>
                            <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                                <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                            </ul>
                            
                            <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                                <i class="fa fa-search"></i>
                            </button>
                            
                        </div>

                        <h1 class="menu-title">Knowledge Management Base</h1>

                        <div class="right-buttons">
                            <a href="../print.html" title="Print this book" aria-label="Print this book">
                                <i id="print-button" class="fa fa-print"></i>
                            </a>
                            
                        </div>
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h2><a class="header" href="#building-a-single-threaded-web-server" id="building-a-single-threaded-web-server">Building a Single-Threaded Web Server</a></h2>
<p>We’ll start by getting a single-threaded web server working. Before we begin,
let’s look at a quick overview of the protocols involved in building web
servers. The details of these protocols are beyond the scope of this book, but
a brief overview will give you the information you need.</p>
<p>The two main protocols involved in web servers are the <em>Hypertext Transfer
Protocol</em> <em>(HTTP)</em> and the <em>Transmission Control Protocol</em> <em>(TCP)</em>. Both
protocols are <em>request-response</em> protocols, meaning a <em>client</em> initiates
requests and a <em>server</em> listens to the requests and provides a response to the
client. The contents of those requests and responses are defined by the
protocols.</p>
<p>TCP is the lower-level protocol that describes the details of how information
gets from one server to another but doesn’t specify what that information is.
HTTP builds on top of TCP by defining the contents of the requests and
responses. It’s technically possible to use HTTP with other protocols, but in
the vast majority of cases, HTTP sends its data over TCP. We’ll work with the
raw bytes of TCP and HTTP requests and responses.</p>
<h3><a class="header" href="#listening-to-the-tcp-connection" id="listening-to-the-tcp-connection">Listening to the TCP Connection</a></h3>
<p>Our web server needs to listen to a TCP connection, so that’s the first part
we’ll work on. The standard library offers a <code>std::net</code> module that lets us do
this. Let’s make a new project in the usual fashion:</p>
<pre><code class="language-text">$ cargo new hello
     Created binary (application) `hello` project
$ cd hello
</code></pre>
<p>Now enter the code in Listing 20-1 in <em>src/main.rs</em> to start. This code will
listen at the address <code>127.0.0.1:7878</code> for incoming TCP streams. When it gets
an incoming stream, it will print <code>Connection established!</code>.</p>
<p><span class="filename">Filename: src/main.rs</span></p>
<pre><pre class="playpen"><code class="language-rust no_run">use std::net::TcpListener;

fn main() {
    let listener = TcpListener::bind(&quot;127.0.0.1:7878&quot;).unwrap();

    for stream in listener.incoming() {
        let stream = stream.unwrap();

        println!(&quot;Connection established!&quot;);
    }
}
</code></pre></pre>
<p><span class="caption">Listing 20-1: Listening for incoming streams and printing
a message when we receive a stream</span></p>
<p>Using <code>TcpListener</code>, we can listen for TCP connections at the address
<code>127.0.0.1:7878</code>. In the address, the section before the colon is an IP address
representing your computer (this is the same on every computer and doesn’t
represent the authors’ computer specifically), and <code>7878</code> is the port. We’ve
chosen this port for two reasons: HTTP is normally accepted on this port, and
7878 is <em>rust</em> typed on a telephone.</p>
<p>The <code>bind</code> function in this scenario works like the <code>new</code> function in that it
will return a new <code>TcpListener</code> instance. The reason the function is called
<code>bind</code> is that in networking, connecting to a port to listen to is known as
“binding to a port.”</p>
<p>The <code>bind</code> function returns a <code>Result&lt;T, E&gt;</code>, which indicates that binding
might fail. For example, connecting to port 80 requires administrator
privileges (nonadministrators can listen only on ports higher than 1024), so if
we tried to connect to port 80 without being an administrator, binding wouldn’t
work. As another example, binding wouldn’t work if we ran two instances of our
program and so had two programs listening to the same port. Because we’re
writing a basic server just for learning purposes, we won’t worry about
handling these kinds of errors; instead, we use <code>unwrap</code> to stop the program if
errors happen.</p>
<p>The <code>incoming</code> method on <code>TcpListener</code> returns an iterator that gives us a
sequence of streams (more specifically, streams of type <code>TcpStream</code>). A single
<em>stream</em> represents an open connection between the client and the server. A
<em>connection</em> is the name for the full request and response process in which a
client connects to the server, the server generates a response, and the server
closes the connection. As such, <code>TcpStream</code> will read from itself to see what
the client sent and then allow us to write our response to the stream. Overall,
this <code>for</code> loop will process each connection in turn and produce a series of
streams for us to handle.</p>
<p>For now, our handling of the stream consists of calling <code>unwrap</code> to terminate
our program if the stream has any errors; if there aren’t any errors, the
program prints a message. We’ll add more functionality for the success case in
the next listing. The reason we might receive errors from the <code>incoming</code> method
when a client connects to the server is that we’re not actually iterating over
connections. Instead, we’re iterating over <em>connection attempts</em>. The
connection might not be successful for a number of reasons, many of them
operating system specific. For example, many operating systems have a limit to
the number of simultaneous open connections they can support; new connection
attempts beyond that number will produce an error until some of the open
connections are closed.</p>
<p>Let’s try running this code! Invoke <code>cargo run</code> in the terminal and then load
<em>127.0.0.1:7878</em> in a web browser. The browser should show an error message
like “Connection reset,” because the server isn’t currently sending back any
data. But when you look at your terminal, you should see several messages that
were printed when the browser connected to the server!</p>
<pre><code class="language-text">     Running `target/debug/hello`
Connection established!
Connection established!
Connection established!
</code></pre>
<p>Sometimes, you’ll see multiple messages printed for one browser request; the
reason might be that the browser is making a request for the page as well as a
request for other resources, like the <em>favicon.ico</em> icon that appears in the
browser tab.</p>
<p>It could also be that the browser is trying to connect to the server multiple
times because the server isn’t responding with any data. When <code>stream</code> goes out
of scope and is dropped at the end of the loop, the connection is closed as
part of the <code>drop</code> implementation. Browsers sometimes deal with closed
connections by retrying, because the problem might be temporary. The important
factor is that we’ve successfully gotten a handle to a TCP connection!</p>
<p>Remember to stop the program by pressing <span class="keystroke">ctrl-c</span>
when you’re done running a particular version of the code. Then restart <code>cargo run</code> after you’ve made each set of code changes to make sure you’re running the
newest code.</p>
<h3><a class="header" href="#reading-the-request" id="reading-the-request">Reading the Request</a></h3>
<p>Let’s implement the functionality to read the request from the browser! To
separate the concerns of first getting a connection and then taking some action
with the connection, we’ll start a new function for processing connections. In
this new <code>handle_connection</code> function, we’ll read data from the TCP stream and
print it so we can see the data being sent from the browser. Change the code to
look like Listing 20-2.</p>
<p><span class="filename">Filename: src/main.rs</span></p>
<pre><pre class="playpen"><code class="language-rust no_run">use std::io::prelude::*;
use std::net::TcpStream;
use std::net::TcpListener;

fn main() {
    let listener = TcpListener::bind(&quot;127.0.0.1:7878&quot;).unwrap();

    for stream in listener.incoming() {
        let stream = stream.unwrap();

        handle_connection(stream);
    }
}

fn handle_connection(mut stream: TcpStream) {
    let mut buffer = [0; 512];

    stream.read(&amp;mut buffer).unwrap();

    println!(&quot;Request: {}&quot;, String::from_utf8_lossy(&amp;buffer[..]));
}
</code></pre></pre>
<p><span class="caption">Listing 20-2: Reading from the <code>TcpStream</code> and printing
the data</span></p>
<p>We bring <code>std::io::prelude</code> into scope to get access to certain traits that let
us read from and write to the stream. In the <code>for</code> loop in the <code>main</code> function,
instead of printing a message that says we made a connection, we now call the
new <code>handle_connection</code> function and pass the <code>stream</code> to it.</p>
<p>In the <code>handle_connection</code> function, we’ve made the <code>stream</code> parameter mutable.
The reason is that the <code>TcpStream</code> instance keeps track of what data it returns
to us internally. It might read more data than we asked for and save that data
for the next time we ask for data. It therefore needs to be <code>mut</code> because its
internal state might change; usually, we think of “reading” as not needing
mutation, but in this case we need the <code>mut</code> keyword.</p>
<p>Next, we need to actually read from the stream. We do this in two steps: first,
we declare a <code>buffer</code> on the stack to hold the data that is read in. We’ve made
the buffer 512 bytes in size, which is big enough to hold the data of a basic
request and sufficient for our purposes in this chapter. If we wanted to handle
requests of an arbitrary size, buffer management would need to be more
complicated; we’ll keep it simple for now. We pass the buffer to <code>stream.read</code>,
which will read bytes from the <code>TcpStream</code> and put them in the buffer.</p>
<p>Second, we convert the bytes in the buffer to a string and print that string.
The <code>String::from_utf8_lossy</code> function takes a <code>&amp;[u8]</code> and produces a <code>String</code>
from it. The “lossy” part of the name indicates the behavior of this function
when it sees an invalid UTF-8 sequence: it will replace the invalid sequence
with <code>�</code>, the <code>U+FFFD REPLACEMENT CHARACTER</code>. You might see replacement
characters for characters in the buffer that aren’t filled by request data.</p>
<p>Let’s try this code! Start the program and make a request in a web browser
again. Note that we’ll still get an error page in the browser, but our
program’s output in the terminal will now look similar to this:</p>
<pre><code class="language-text">$ cargo run
   Compiling hello v0.1.0 (file:///projects/hello)
    Finished dev [unoptimized + debuginfo] target(s) in 0.42 secs
     Running `target/debug/hello`
Request: GET / HTTP/1.1
Host: 127.0.0.1:7878
User-Agent: Mozilla/5.0 (Windows NT 10.0; WOW64; rv:52.0) Gecko/20100101
Firefox/52.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: en-US,en;q=0.5
Accept-Encoding: gzip, deflate
Connection: keep-alive
Upgrade-Insecure-Requests: 1
������������������������������������
</code></pre>
<p>Depending on your browser, you might get slightly different output. Now that
we’re printing the request data, we can see why we get multiple connections
from one browser request by looking at the path after <code>Request: GET</code>. If the
repeated connections are all requesting <em>/</em>, we know the browser is trying to
fetch <em>/</em> repeatedly because it’s not getting a response from our program.</p>
<p>Let’s break down this request data to understand what the browser is asking of
our program.</p>
<h3><a class="header" href="#a-closer-look-at-an-http-request" id="a-closer-look-at-an-http-request">A Closer Look at an HTTP Request</a></h3>
<p>HTTP is a text-based protocol, and a request takes this format:</p>
<pre><code class="language-text">Method Request-URI HTTP-Version CRLF
headers CRLF
message-body
</code></pre>
<p>The first line is the <em>request line</em> that holds information about what the
client is requesting. The first part of the request line indicates the <em>method</em>
being used, such as <code>GET</code> or <code>POST</code>, which describes how the client is making
this request. Our client used a <code>GET</code> request.</p>
<p>The next part of the request line is <em>/</em>, which indicates the <em>Uniform Resource
Identifier</em> <em>(URI)</em> the client is requesting: a URI is almost, but not quite,
the same as a <em>Uniform Resource Locator</em> <em>(URL)</em>. The difference between URIs
and URLs isn’t important for our purposes in this chapter, but the HTTP spec
uses the term URI, so we can just mentally substitute URL for URI here.</p>
<p>The last part is the HTTP version the client uses, and then the request line
ends in a <em>CRLF sequence</em>. (CRLF stands for <em>carriage return</em> and <em>line feed</em>,
which are terms from the typewriter days!) The CRLF sequence can also be
written as <code>\r\n</code>, where <code>\r</code> is a carriage return and <code>\n</code> is a line feed. The
CRLF sequence separates the request line from the rest of the request data.
Note that when the CRLF is printed, we see a new line start rather than <code>\r\n</code>.</p>
<p>Looking at the request line data we received from running our program so far,
we see that <code>GET</code> is the method, <em>/</em> is the request URI, and <code>HTTP/1.1</code> is the
version.</p>
<p>After the request line, the remaining lines starting from <code>Host:</code> onward are
headers. <code>GET</code> requests have no body.</p>
<p>Try making a request from a different browser or asking for a different
address, such as <em>127.0.0.1:7878/test</em>, to see how the request data changes.</p>
<p>Now that we know what the browser is asking for, let’s send back some data!</p>
<h3><a class="header" href="#writing-a-response" id="writing-a-response">Writing a Response</a></h3>
<p>Now we’ll implement sending data in response to a client request. Responses
have the following format:</p>
<pre><code class="language-text">HTTP-Version Status-Code Reason-Phrase CRLF
headers CRLF
message-body
</code></pre>
<p>The first line is a <em>status line</em> that contains the HTTP version used in the
response, a numeric status code that summarizes the result of the request, and
a reason phrase that provides a text description of the status code. After the
CRLF sequence are any headers, another CRLF sequence, and the body of the
response.</p>
<p>Here is an example response that uses HTTP version 1.1, has a status code of
200, an OK reason phrase, no headers, and no body:</p>
<pre><code class="language-text">HTTP/1.1 200 OK\r\n\r\n
</code></pre>
<p>The status code 200 is the standard success response. The text is a tiny
successful HTTP response. Let’s write this to the stream as our response to a
successful request! From the <code>handle_connection</code> function, remove the
<code>println!</code> that was printing the request data and replace it with the code in
Listing 20-3.</p>
<p><span class="filename">Filename: src/main.rs</span></p>
<pre><pre class="playpen"><code class="language-rust">
# #![allow(unused_variables)]
#fn main() {
# use std::io::prelude::*;
# use std::net::TcpStream;
fn handle_connection(mut stream: TcpStream) {
    let mut buffer = [0; 512];

    stream.read(&amp;mut buffer).unwrap();

    let response = &quot;HTTP/1.1 200 OK\r\n\r\n&quot;;

    stream.write(response.as_bytes()).unwrap();
    stream.flush().unwrap();
}
#}</code></pre></pre>
<p><span class="caption">Listing 20-3: Writing a tiny successful HTTP response to
the stream</span></p>
<p>The first new line defines the <code>response</code> variable that holds the success
message’s data. Then we call <code>as_bytes</code> on our <code>response</code> to convert the string
data to bytes. The <code>write</code> method on <code>stream</code> takes a <code>&amp;[u8]</code> and sends those
bytes directly down the connection.</p>
<p>Because the <code>write</code> operation could fail, we use <code>unwrap</code> on any error result
as before. Again, in a real application you would add error handling here.
Finally, <code>flush</code> will wait and prevent the program from continuing until all
the bytes are written to the connection; <code>TcpStream</code> contains an internal
buffer to minimize calls to the underlying operating system.</p>
<p>With these changes, let’s run our code and make a request. We’re no longer
printing any data to the terminal, so we won’t see any output other than the
output from Cargo. When you load <em>127.0.0.1:7878</em> in a web browser, you should
get a blank page instead of an error. You’ve just hand-coded an HTTP request
and response!</p>
<h3><a class="header" href="#returning-real-html" id="returning-real-html">Returning Real HTML</a></h3>
<p>Let’s implement the functionality for returning more than a blank page. Create
a new file, <em>hello.html</em>, in the root of your project directory, not in the
<em>src</em> directory. You can input any HTML you want; Listing 20-4 shows one
possibility.</p>
<p><span class="filename">Filename: hello.html</span></p>
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
  &lt;head&gt;
    &lt;meta charset=&quot;utf-8&quot;&gt;
    &lt;title&gt;Hello!&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;h1&gt;Hello!&lt;/h1&gt;
    &lt;p&gt;Hi from Rust&lt;/p&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p><span class="caption">Listing 20-4: A sample HTML file to return in a
response</span></p>
<p>This is a minimal HTML5 document with a heading and some text. To return this
from the server when a request is received, we’ll modify <code>handle_connection</code> as
shown in Listing 20-5 to read the HTML file, add it to the response as a body,
and send it.</p>
<p><span class="filename">Filename: src/main.rs</span></p>
<pre><pre class="playpen"><code class="language-rust">
# #![allow(unused_variables)]
#fn main() {
# use std::io::prelude::*;
# use std::net::TcpStream;
use std::fs;
// --snip--

fn handle_connection(mut stream: TcpStream) {
    let mut buffer = [0; 512];
    stream.read(&amp;mut buffer).unwrap();

    let contents = fs::read_to_string(&quot;hello.html&quot;).unwrap();

    let response = format!(&quot;HTTP/1.1 200 OK\r\n\r\n{}&quot;, contents);

    stream.write(response.as_bytes()).unwrap();
    stream.flush().unwrap();
}
#}</code></pre></pre>
<p><span class="caption">Listing 20-5: Sending the contents of <em>hello.html</em> as the
body of the response</span></p>
<p>We’ve added a line at the top to bring the standard library’s filesystem module
into scope. The code for reading the contents of a file to a string should look
familiar; we used it in Chapter 12 when we read the contents of a file for our
I/O project in Listing 12-4.</p>
<p>Next, we use <code>format!</code> to add the file’s contents as the body of the success
response.</p>
<p>Run this code with <code>cargo run</code> and load <em>127.0.0.1:7878</em> in your browser; you
should see your HTML rendered!</p>
<p>Currently, we’re ignoring the request data in <code>buffer</code> and just sending back
the contents of the HTML file unconditionally. That means if you try requesting
<em>127.0.0.1:7878/something-else</em> in your browser, you’ll still get back this
same HTML response. Our server is very limited and is not what most web servers
do. We want to customize our responses depending on the request and only send
back the HTML file for a well-formed request to <em>/</em>.</p>
<h3><a class="header" href="#validating-the-request-and-selectively-responding" id="validating-the-request-and-selectively-responding">Validating the Request and Selectively Responding</a></h3>
<p>Right now, our web server will return the HTML in the file no matter what the
client requested. Let’s add functionality to check that the browser is
requesting <em>/</em> before returning the HTML file and return an error if the
browser requests anything else. For this we need to modify <code>handle_connection</code>,
as shown in Listing 20-6. This new code checks the content of the request
received against what we know a request for <em>/</em> looks like and adds <code>if</code> and
<code>else</code> blocks to treat requests differently.</p>
<p><span class="filename">Filename: src/main.rs</span></p>
<pre><pre class="playpen"><code class="language-rust">
# #![allow(unused_variables)]
#fn main() {
# use std::io::prelude::*;
# use std::net::TcpStream;
# use std::fs;
// --snip--

fn handle_connection(mut stream: TcpStream) {
    let mut buffer = [0; 512];
    stream.read(&amp;mut buffer).unwrap();

    let get = b&quot;GET / HTTP/1.1\r\n&quot;;

    if buffer.starts_with(get) {
        let contents = fs::read_to_string(&quot;hello.html&quot;).unwrap();

        let response = format!(&quot;HTTP/1.1 200 OK\r\n\r\n{}&quot;, contents);

        stream.write(response.as_bytes()).unwrap();
        stream.flush().unwrap();
    } else {
        // some other request
    }
}
#}</code></pre></pre>
<p><span class="caption">Listing 20-6: Matching the request and handling requests
to <em>/</em> differently from other requests</span></p>
<p>First, we hardcode the data corresponding to the <em>/</em> request into the <code>get</code>
variable. Because we’re reading raw bytes into the buffer, we transform <code>get</code>
into a byte string by adding the <code>b&quot;&quot;</code> byte string syntax at the start of the
content data. Then we check whether <code>buffer</code> starts with the bytes in <code>get</code>. If
it does, it means we’ve received a well-formed request to <em>/</em>, which is the
success case we’ll handle in the <code>if</code> block that returns the contents of our
HTML file.</p>
<p>If <code>buffer</code> does <em>not</em> start with the bytes in <code>get</code>, it means we’ve received
some other request. We’ll add code to the <code>else</code> block in a moment to respond
to all other requests.</p>
<p>Run this code now and request <em>127.0.0.1:7878</em>; you should get the HTML in
<em>hello.html</em>. If you make any other request, such as
<em>127.0.0.1:7878/something-else</em>, you’ll get a connection error like those you
saw when running the code in Listing 20-1 and Listing 20-2.</p>
<p>Now let’s add the code in Listing 20-7 to the <code>else</code> block to return a response
with the status code 404, which signals that the content for the request was
not found. We’ll also return some HTML for a page to render in the browser
indicating the response to the end user.</p>
<p><span class="filename">Filename: src/main.rs</span></p>
<pre><pre class="playpen"><code class="language-rust">
# #![allow(unused_variables)]
#fn main() {
# use std::io::prelude::*;
# use std::net::TcpStream;
# use std::fs;
# fn handle_connection(mut stream: TcpStream) {
# if true {
// --snip--

} else {
    let status_line = &quot;HTTP/1.1 404 NOT FOUND\r\n\r\n&quot;;
    let contents = fs::read_to_string(&quot;404.html&quot;).unwrap();

    let response = format!(&quot;{}{}&quot;, status_line, contents);

    stream.write(response.as_bytes()).unwrap();
    stream.flush().unwrap();
}
# }
#}</code></pre></pre>
<p><span class="caption">Listing 20-7: Responding with status code 404 and an
error page if anything other than <em>/</em> was requested</span></p>
<p>Here, our response has a status line with status code 404 and the reason
phrase <code>NOT FOUND</code>. We’re still not returning headers, and the body of the
response will be the HTML in the file <em>404.html</em>. You’ll need to create a
<em>404.html</em> file next to <em>hello.html</em> for the error page; again feel free to use
any HTML you want or use the example HTML in Listing 20-8.</p>
<p><span class="filename">Filename: 404.html</span></p>
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
  &lt;head&gt;
    &lt;meta charset=&quot;utf-8&quot;&gt;
    &lt;title&gt;Hello!&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;h1&gt;Oops!&lt;/h1&gt;
    &lt;p&gt;Sorry, I don't know what you're asking for.&lt;/p&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p><span class="caption">Listing 20-8: Sample content for the page to send back
with any 404 response</span></p>
<p>With these changes, run your server again. Requesting <em>127.0.0.1:7878</em>
should return the contents of <em>hello.html</em>, and any other request, like
<em>127.0.0.1:7878/foo</em>, should return the error HTML from <em>404.html</em>.</p>
<h3><a class="header" href="#a-touch-of-refactoring" id="a-touch-of-refactoring">A Touch of Refactoring</a></h3>
<p>At the moment the <code>if</code> and <code>else</code> blocks have a lot of repetition: they’re both
reading files and writing the contents of the files to the stream. The only
differences are the status line and the filename. Let’s make the code more
concise by pulling out those differences into separate <code>if</code> and <code>else</code> lines
that will assign the values of the status line and the filename to variables;
we can then use those variables unconditionally in the code to read the file
and write the response. Listing 20-9 shows the resulting code after replacing
the large <code>if</code> and <code>else</code> blocks.</p>
<p><span class="filename">Filename: src/main.rs</span></p>
<pre><pre class="playpen"><code class="language-rust">
# #![allow(unused_variables)]
#fn main() {
# use std::io::prelude::*;
# use std::net::TcpStream;
# use std::fs;
// --snip--

fn handle_connection(mut stream: TcpStream) {
#     let mut buffer = [0; 512];
#     stream.read(&amp;mut buffer).unwrap();
#
#     let get = b&quot;GET / HTTP/1.1\r\n&quot;;
    // --snip--

    let (status_line, filename) = if buffer.starts_with(get) {
        (&quot;HTTP/1.1 200 OK\r\n\r\n&quot;, &quot;hello.html&quot;)
    } else {
        (&quot;HTTP/1.1 404 NOT FOUND\r\n\r\n&quot;, &quot;404.html&quot;)
    };

    let contents = fs::read_to_string(filename).unwrap();

    let response = format!(&quot;{}{}&quot;, status_line, contents);

    stream.write(response.as_bytes()).unwrap();
    stream.flush().unwrap();
}
#}</code></pre></pre>
<p><span class="caption">Listing 20-9: Refactoring the <code>if</code> and <code>else</code> blocks to
contain only the code that differs between the two cases</span></p>
<p>Now the <code>if</code> and <code>else</code> blocks only return the appropriate values for the
status line and filename in a tuple; we then use destructuring to assign these
two values to <code>status_line</code> and <code>filename</code> using a pattern in the <code>let</code>
statement, as discussed in Chapter 18.</p>
<p>The previously duplicated code is now outside the <code>if</code> and <code>else</code> blocks and
uses the <code>status_line</code> and <code>filename</code> variables. This makes it easier to see
the difference between the two cases, and it means we have only one place to
update the code if we want to change how the file reading and response writing
work. The behavior of the code in Listing 20-9 will be the same as that in
Listing 20-8.</p>
<p>Awesome! We now have a simple web server in approximately 40 lines of Rust code
that responds to one request with a page of content and responds to all other
requests with a 404 response.</p>
<p>Currently, our server runs in a single thread, meaning it can only serve one
request at a time. Let’s examine how that can be a problem by simulating some
slow requests. Then we’ll fix it so our server can handle multiple requests at
once.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="../rustbook/ch20-00-final-project-a-web-server.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="../rustbook/ch20-02-multithreaded.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a href="../rustbook/ch20-00-final-project-a-web-server.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a href="../rustbook/ch20-02-multithreaded.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        

        

        
        <script src="../ace.js" type="text/javascript" charset="utf-8"></script>
        <script src="../editor.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mode-rust.js" type="text/javascript" charset="utf-8"></script>
        <script src="../theme-dawn.js" type="text/javascript" charset="utf-8"></script>
        <script src="../theme-tomorrow_night.js" type="text/javascript" charset="utf-8"></script>
        

        
        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        

    </body>
</html>
